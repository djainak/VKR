@{
    Layout = null;
}
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width" />
    <title>Добавление пункта меню</title>
</head>
<body>
    <div>
        @if (ViewBag.isError)
    {
        <p style="color: red; font-size: 18px;">Данное меню не существует</p>
}
else
{
    <a href="../Admin/ListMenuItems?MenuId=@ViewBag.MenuId&UserId=@ViewBag.UserID">Добавить пункт меню</a>
    <br />
    <a href="../Admin/MenuList?UserId=@ViewBag.UserID">Вернуться к списку меню</a>
    <br />
    <table style="width: 100%; border: 1px solid gray" border="1">
        <tr>
            <th style="width: 20%">Название</th>
            <th style="width: 50%">Состав</th>
            <th style="width: 10%">Цена</th>
        </tr>
        @foreach (var menuItem in ViewBag.MenuItems)
    {
        <tr value=@menuItem.Id>
            <td>@menuItem.Name</td>
            <td>@menuItem.Ingredients</td>
            <td>@menuItem.Price</td>
            <td><a href="../Admin/ChangeMenuItem?UserId=@ViewBag.UserID&MenuItemId=@menuItem.Id&MenuId=@ViewBag.MenuId">Редактировать</a></td>
            <td><input type="button" value="Удалить" class="remove-menu-item" /></td>
        </tr>
}
    </table>

    <script>
        $(".remove-menu-item").on("click", function () {
            var button = $(this);
            var str = button.parent().parent();
            // +"&UserId=@ViewBag.UserID";
            $.ajax({
                url: "../Admin/RemoveMenuItem?id=" + str.attr("value")+"&MenuId=@ViewBag.MenuId",
                type: "POST",
                dataType: "text",
                success: function () {
                    str.remove();
                }
            })
        })
    </script>
}
    </div>
</body>
</html>
